function update(e){(38 in keysDown||87 in keysDown)&&(hero.y-=hero.speed*e),(40 in keysDown||83 in keysDown)&&(hero.y+=hero.speed*e),(37 in keysDown||65 in keysDown)&&(hero.x-=hero.speed*e),(39 in keysDown||68 in keysDown)&&(hero.x+=hero.speed*e),hero.x<=0?hero.x=canvas.width:hero.x>=canvas.width&&(hero.x=0),hero.y<=0?hero.y=canvas.height:hero.y>=canvas.height&&(hero.y=0),hero.x<=monster.x+32&&hero.y<=monster.y+32&&monster.x<=hero.x+32&&monster.y<=hero.y+32&&(level++,reset())}function render(){bgReady&&ctx.drawImage(bgImg,0,0),heroReady&&ctx.drawImage(heroImg,hero.x,hero.y),monsterReady&&ctx.drawImage(monsterImg,monster.x,monster.y),ctx.fillStyle="rgb(250, 250, 250)",ctx.font="24px Helvetica",ctx.textAlign="left",ctx.textBaseline="top",ctx.fillText("Level "+level,32,32)}function reset(){hero.x=canvas.width/2,hero.y=canvas.height/2,monster.x=Math.random()*(canvas.width-64),monster.y=Math.random()*(canvas.height-64)}function main(e){now=Date.now(),delta=now-then,update(delta/1e3),render(),then=now,requestAnimationFrame(main)}level=0,bgReady=!1,bgImg=new Image,bgImg.onload=function(){bgReady=!0},bgImg.src="bg.png",heroReady=!1,heroImg=new Image,heroImg.onload=function(){heroReady=!0},heroImg.src="hero.png",monsterReady=!1,monsterImg=new Image,monsterImg.onload=function(){monsterReady=!0},monsterImg.src="monster.png",keysDown={},addEventListener("keydown",function(e){keysDown[e.keyCode]=!0}),addEventListener("keyup",function(e){delete keysDown[e.keyCode]}),canvas=document.querySelector("#game"),canvas.width=512,canvas.height=480,ctx=canvas.getContext("2d"),hero={speed:256,x:0,y:0},monster={x:0,y:0},then=Date.now(),reset(),main();